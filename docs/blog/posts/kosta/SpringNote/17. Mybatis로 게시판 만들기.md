---
draft: false
authors:
    - hyewon
date: 2024-08-26
categories:
    - spring
---

# Mybatisë¡œ ê²Œì‹œíŒ ë§Œë“¤ê¸°

-   DTO, DAO ì‚¬ìš©
-   í˜ì´ì§€ë„¤ì´ì…˜

<!-- more -->

## ğŸ“Œ ê²Œì‹œë¬¼ ë¦¬ìŠ¤íŠ¸ í˜ì´ì§€ë„¤ì´ì…˜ ì ìš©

![alt text](img/image-1.png)

> Domain -> PageResolver

-   [ğŸ’¡ì£¼ì˜] ì •ìˆ˜ ë‚˜ëˆ—ì…ˆì˜ ë¬¸ì œ: ìë°”ì—ì„œ ë‘ ê°œì˜ ì •ìˆ˜(int)ë¥¼ ë‚˜ëˆ„ë©´, ê²°ê³¼ëŠ” ì •ìˆ˜ë¡œ ë°˜í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, 41 / 10ì€ 4ê°€ ë©ë‹ˆë‹¤. ì´ëŠ” ì†Œìˆ˜ì ì„ ë¬´ì‹œí•˜ê³ , ì •ìˆ˜ ë¶€ë¶„ë§Œ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
    -   41 / 10 = 4 (ì •ìˆ˜ ë‚˜ëˆ—ì…ˆ) -> 41 / 10 = 4í˜ì´ì§€
    -   41 / 10.0 = 4.1 (ë¶€ë™ì†Œìˆ˜ì  ë‚˜ëˆ—ì…ˆ) -> Math.ceil(4.1)ì€ 5 (ì „ì²´ í˜ì´ì§€ ìˆ˜ëŠ” 5í˜ì´ì§€)

```java
package com.kosta.september.domain;

public class PageResolver {

	private int totalCnt;  // ì´ ê²Œì‹œë¬¼ ê°œìˆ˜
	private int pageSize = 10;   // í•œ í˜ì´ì§€ë‹¹ ê²Œì‹œë¬¼ ê°œìˆ˜
	public final int NAV_SIZE = 10; // page pagination size

    private int totalPage; // ì „í˜ í˜ì´ì§€ ê°œìˆ˜
    private int page; // í˜„ì¬ í˜ì´ì§€

    private int beginPage; // í™”ë©´ì— ë³´ì—¬ì¤„ ì²« í˜ì´ì§€
    private int endPage; // í™”ë©´ì— ë³´ì—¬ì¤„ ë§ˆì§€ë§‰ í˜ì´ì§€
    private boolean showNext = false;  // ì´í›„ë¥¼ ë³´ì—¬ì¤„ì§€ ì—¬ë¶€ (endPage == totalPage showNextëŠ” false)
    private boolean showPrev = false;  // ì´ì „ì„ ë³´ì—¬ì¤„ì§€ ì—¬ë¶€ (beginPage == 1 ì•„ë‹ˆë©´ showPrevëŠ” true)

    // ìƒì„±ì
   public PageResolver(int totalCnt, int page) {
		this(totalCnt, page, 10);
	}


	public PageResolver(int totalCnt, int page, int pageSize) {
		this.totalCnt = totalCnt;
		this.pageSize = pageSize;
		this.page = page;

		this.totalPage = (int) Math.ceil(totalCnt/(double)pageSize); // ì „ì²´ í˜ì´ì§€ ê°œìˆ˜
        this.beginPage = page / NAV_SIZE * NAV_SIZE +1; // ì²« í˜ì´ì§€ ìˆ«ì
        this.endPage = Math.min(this.beginPage + this.NAV_SIZE -1, totalPage); // ë§ˆì§€ë§‰ í˜ì´ì§€ ìˆ«ì
        this.showPrev = beginPage != 1;
        this.showNext = endPage != totalPage;
	}


    public void print() {
        s
    }

}

```

<br>
<br>

## í˜ì´ì§• ì²˜ë¦¬ë¥¼ ìœ„í•œ SQLë¬¸ ëª…ë ¹ì–´

âœ… boardList.jsp í™”ë©´ displayì‹œ íŠ¹ì •í˜ì´ì§€ê°€ ë³´ì—¬ì§„ë‹¤.  
sql ì¿¼ë¦¬ì—ì„œ ê²°ê³¼ ë°ì´í„°ë¥¼ í˜ì´ì§• ì²˜ë¦¬ë¥¼ í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ëª…ë ¹ì–´ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

### LIMIT

-   SQLì¿¼ë¦¬ ê²°ê³¼ë¡œ ë°˜í™šë˜ëŠ” ë ˆì½”ë“œì˜ ìµœëŒ€ ìˆ˜ë¥¼ ì§€ì •í•œë‹¤.
-   LIMIT 10 : ì¿¼ë¦¬ ê²°ê³¼ì—ì„œ ìµœëŒ€ 10 ê°œì˜ ê²Œì‹œë¬¼ì„ ë³´ì—¬ì¤€ë‹¤.

### OFFSET

-   ëª‡ê°œì˜ ë ˆì½”ë“œë¥¼ ê±´ë„ˆë„ê³  ë°ì´í„°ë¥¼ ë°˜í™˜í• ì§€ ì§€ì •í•¨
-   OFFSET 5 : ì²˜ìŒ 5ê°œì˜ ë ˆì½”ë“œë¥¼ ê±´ë„ˆë„ê³  ë‹¤ìŒ ë ˆì½”ë“œë¶€í„° ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ì‹œì‘í•¨
-   ì˜ˆì‹œ
    ```sql
    LIMIT #{pageSize} OFFSET #{offset}
    ```
    -   pageSizeëŠ” í•œ í˜ì´ì§€ì— ë³´ì—¬ì§ˆ ë ˆì½”ë“œ ìˆ˜
    -   offsetì€ ê±´ë„ˆëŒ ë ˆì½”ë“œ ìˆ˜
