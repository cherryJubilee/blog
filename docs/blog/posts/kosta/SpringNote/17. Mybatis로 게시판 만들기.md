---
draft: false
authors:
    - hyewon
date: 2024-08-26
categories:
    - spring
---

# Mybatis로 게시판 만들기

-   DTO, DAO 사용
-   페이지네이션

<!-- more -->

## 📌 게시물 리스트 페이지네이션 적용

![alt text](img/image-1.png)

> Domain -> PageResolver

-   [💡주의] 정수 나눗셈의 문제: 자바에서 두 개의 정수(int)를 나누면, 결과는 정수로 반한다. 예를 들어, 41 / 10은 4가 됩니다. 이는 소수점을 무시하고, 정수 부분만 반환하기 때문이다.
    -   41 / 10 = 4 (정수 나눗셈) -> 41 / 10 = 4페이지
    -   41 / 10.0 = 4.1 (부동소수점 나눗셈) -> Math.ceil(4.1)은 5 (전체 페이지 수는 5페이지)

```java
package com.kosta.september.domain;

public class PageResolver {

	private int totalCnt;  // 총 게시물 개수
	private int pageSize = 10;   // 한 페이지당 게시물 개수
	public final int NAV_SIZE = 10; // page pagination size

    private int totalPage; // 전페 페이지 개수
    private int page; // 현재 페이지

    private int beginPage; // 화면에 보여줄 첫 페이지
    private int endPage; // 화면에 보여줄 마지막 페이지
    private boolean showNext = false;  // 이후를 보여줄지 여부 (endPage == totalPage showNext는 false)
    private boolean showPrev = false;  // 이전을 보여줄지 여부 (beginPage == 1 아니면 showPrev는 true)

    // 생성자
   public PageResolver(int totalCnt, int page) {
		this(totalCnt, page, 10);
	}


	public PageResolver(int totalCnt, int page, int pageSize) {
		this.totalCnt = totalCnt;
		this.pageSize = pageSize;
		this.page = page;

		this.totalPage = (int) Math.ceil(totalCnt/(double)pageSize); // 전체 페이지 개수
        this.beginPage = page / NAV_SIZE * NAV_SIZE +1; // 첫 페이지 숫자
        this.endPage = Math.min(this.beginPage + this.NAV_SIZE -1, totalPage); // 마지막 페이지 숫자
        this.showPrev = beginPage != 1;
        this.showNext = endPage != totalPage;
	}


    public void print() {
        s
    }

}

```

<br>
<br>

## 페이징 처리를 위한 SQL문 명령어

✅ boardList.jsp 화면 display시 특정페이지가 보여진다.  
sql 쿼리에서 결과 데이터를 페이징 처리를 하기 위해 사용되는 명령어는 다음과 같다.

### LIMIT

-   SQL쿼리 결과로 반홚되는 레코드의 최대 수를 지정한다.
-   LIMIT 10 : 쿼리 결과에서 최대 10 개의 게시물을 보여준다.

### OFFSET

-   몇개의 레코드를 건너띄고 데이터를 반환할지 지정함
-   OFFSET 5 : 처음 5개의 레코드를 건너띄고 다음 레코드부터 데이터를 가져오기 시작함
-   예시
    ```sql
    LIMIT #{pageSize} OFFSET #{offset}
    ```
    -   pageSize는 한 페이지에 보여질 레코드 수
    -   offset은 건너띌 레코드 수
