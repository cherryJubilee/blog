---
draft: false
authors:
    - hyewon
date: 2024-08-13
categories:
    - Spring
---

# Spring Bean

> @Bean 애너테이션을 사용하여 구성 클래스에서 정의할 두 빈 사이의 관계 구현하기

<!-- more -->

### 1. 빈을 연결하는 방법

1. 빈을 생성하는 메서드를 직접 사용하여 빈을 연결함 (Wiring).
2. 스프링이 메서드 매개변수를 이용하여 값을 제공 (Auto-wiring).

### 2. 구성 파일에서 정의된 빈 간의 관계 구현

1. 스프링 컨텍스트에 앵무새(Parrot)와 사람(Person)이라는 두 인스턴스를 준비.
    - 이 인스턴스를 생성하고 컨텍스트에 추가함.
    - 사람이 앵무새를 소유하도록 관계를 설정 (두 인스턴스를 연결해야 함).
        - 이 관계를 "has-a 관계"라고 함.
2. 빈을 선언하는 메서드를 직접 호출해서 빈 간의 연결을 설정함.
    - 이 방법을 와이어링(Wiring) 방식이라고 함.
3. 컨텍스트에 두 개의 빈을 추가한 상태에서 관계를 구성하기 전

    **스프링 컨텍스트**

    ***

    | | - 두 빈은 컨텍스트에 있지만 |
    | Parrot | 서로 연결되어 있지 않음. |
    | | - 사람은 아직 앵무새를 소유하고 있지 않음. |
    | Person | |

    ***

### 3. 두 @Bean 메서드 간 직접 메서드를 호출하여 빈 작성

1. 구성 클래스에서 한 메서드에서 다른 메서드를 호출하여 빈을 연결하는 것.
2. 직관적이므로 자주 사용됨.
3. 스프링 컨텍스트

    ***

    | | - 설정하려는 빈을 반환하는 메서드를 직접 호출하여 |
    | | 사람 빈과 앵무새 빈 간의 관계를 정의함. |
    | Parrot | |
    | ------- | Person | - 결과적으로 두 빈 사이에 "has-a 관계"가 생성됨. |
    | | 사람이 앵무새를 소유함. |

    ***

4. 앵무새 빈이 컨텍스트에 이미 있을 때
    - 스프링은 `parrot()` 메서드를 호출하는 대신 해당 컨텍스트에서 직접 인스턴스를 가져옴.
5. 앵무새 빈이 아직 컨텍스트에 없을 때
    - 스프링은 `parrot()` 메서드를 호출하고 빈을 반환함.

### 4. @Bean 메서드의 매개변수로 빈 와이어링하기

1. 해당 객체 타입의 메서드에 매개변수를 추가하고, 스프링이 해당 매개변수를 이용하여 값을 제공하는 것.
2. `Person person(Parrot parrot)` 메서드를 호출할 때 스프링은 컨텍스트에서 빈을 찾아 그 값을 위 메서드의 매개변수에 주입(injection)함.
    - 이것을 빈 의존성 주입이라고 함.
3. DI (Dependency Injection)
    - 의존성 주입.
    - 프레임워크가 특정 필드 또는 매개변수에 값을 설정하는 기법.
    - IoC 원리를 응용한 것으로, 프레임워크가 실행될 때 애플리케이션을 제어하는 것을 의미.
