---
draft: false
authors:
    - hyewon
date: 2024-08-13
categories:
    - HTTP
---

# HTTP 상태코드

> HTTP 상태코드 1xx, 2xx, 3xx, 4xx, 5xx에 대해 알아보자

<!-- more -->

## 📌 상태코드 종류

### 1️⃣ 1xx(information)

-   요청이 수신되어 처리중

### 2️⃣ 2xx(Successful)

-   요청 정상 처리

| 200 | OK |
| 201 | Created |요청 성공해서 새로운 리소스 생성 |
| 202 | Accepted | 요청이 접수되었으나 처리가 완료되지 않음, 배치처리 같은 곳에 사용된다. |
| 204 | No content | 서버가 요청을 성공적으로 수행했지만, 응답 페이로드 본문에 보낼데이터가 없음, 저장버튼을 눌러도 같은 화면을 유지해야할 때, 결과 내용이 없어도 204메시지 만으로 성공을 인식할 수 있다. |

### 3️⃣ 3xx(Redirection)

-   요청을 완료하여 클라이언트(웹브라우저)의 추가 행동이 필요할 때
-   301~308 주로 사용
-   자동 리다이렉션 흐름

    -   이벤트 페이지의 url이 바뀐 상황이라면, 301 상태로 Location에 해당하는 url경로로 바뀌게 된다. 그리고 이 웹브라우저가 서버에 처음부터 바뀐 url경로로 다시 요청하게 된다.

        ```shell
        HTTP/1.1 301 Moved Permanently
        Location: /new-event
        ```

-   영구 리다이렉션(301, 308)
    -   /member -> /users
    -   /event -> /new-event
-   일시적 리다이렉션 (302, 307, 303)
    -   주문 완료 후 주문 내역 화면으로 이동
    -   리소스의 URI가 일시적으로 변경, 따라서 검색 엔진 등에서 URL을 변경하면 안됨
    -   PRG: `Post/Redirect/Get`
    -   ⭐️ `302 Found` : 실무에서 대부분 사용, 리다이렉트시 요청 메서드가 GET으로 변하고, 본문이 제거될 수 있음. 대부분 GET으로 변경
    -   `307 Temporary Redirect` : 302와 기능은 같음, 리다이렉트시 요청 메서드와 본문 유지 (요청 메서드를 변경하면 안된다. MUST NOT), 원래 메서드 유지!!
    -   `303 See Other` : 302와 기능은 같음, 리다이렉트시 모두 GET으로 변경
-   특수 리다이렉션
    -   결과 대신 캐시를 사용(클라이언트가 서버에게 캐시기간이 만료된건지 확인할 때 )

| 300 | Multiple Choices | 안쓴다. |
| 302 | Moved Permanently | 요청 성공해서 새로운 리소스 생성, 새로운 url로 변경되어서 다시 요청을 할때 GET으로 변하면서 body내용이 사라지게 됨, 폼을 재작성하게 된다는 단점 |
| 303 | See Other | 새로운 url로 변경되어서 다시 요청해도 POST로 body 메시지 유지된다. 하지만 폼이 바뀌면 입력하는 데이터가 보통 바뀌기 때문에 다시 입력하는 301 상태코드로 GET으로 변경 되는게 일반적이다. 거의 안씀 |
| 304 | Not Modified | 캐시를 목적으로 사용, 클라이언트에게 리소스가 수정되지 않았음을 알려준다. 따라서 클라이언트는 로컬 PC에 저장된 캐시를 재사용한다 (캐시로 리다이렉트 한다.) |
| 307 | Temporary Redirect | |
| 308 | Permanent Redirect | |

#### Post/Redirect/Get

-   내가 만약 주문을 하고 새로고침을 하면 마지막 동작이었던 주문이 한번 더 진행된다.
-   예시
    -   요청 : POST /order HTTP/1.1
    -   주문데이터 저장
    -   응답 : HTTP/1.1 302 Found, Location: /order-result/19
    -   자동 리다이렉트
    -   요청 : GET /order-result/19 HTTP/1.1
    -   주문데이터 19번 주문 조회
    -   응답 : HTTP/1.1 202 OK
    -   고객이 실수로 새로고침 하더라도 결과 화면에서 새로고침, 결과 화면만 다시 GET 요청 (`중복 주문 문제 해결!`)
-   ⭐️ 결론
    -   307, 303을 권장하지만 현실적으로 이미 많은 라이브러리들이 302를 기본값으로 사용한다.
    -   자동 리다이렉션시에 GET으로 변해도 된다면 그냥 302를 사용해도 된다.

### 4️⃣ 4xx(client Error)

-   클라이언트 오류, 잘못된 문법 등으로 서버가 요청을 수행할 수 없음
-   401 : 클라이언트가 해당 리소스에 대한 인증이 필요함
    -   인증(Authentication): 본인이 누구인지 확인, (로그인)
    -   인가(Authorization): 권한부여 (ADMIN 권한처럼 특정 리소스에 접근할 수 있는 권한, 인증이 있어야 인가가 있음)
-   403: Forbidden
    -   서버가 요청을 이해했지만 승인을 거부함
    -   주로 인증 자격은 있지만, 접근 권한이 불충분한 경우
    -   어드미 등급 사용자가 로그인을 했지만, 어드민 등급의 리소스에 접근하는 경우
-   404 : Not Found
    -   요청 리소스가 서버에 없음 또는 클라이언트가 권한이 부족한 리소스에 접근했을 때 해당 리소스를 숨기고 싶을때

### 5️⃣ 5xx(Server Error)

-   서버 오류, 서버가 정상 요청을 처리하지 못함
-   서버 문제이기 때문에 재시도하면 성공할 수도 있음
