---
draft: false
authors:
  - hyewon
date: 2024-01-26
categories:
  - Study
  - 데이터베이스
---
# 트렌잭션과 ACID
> ACID 트랜잭션의 장점, Atomicity, Consistency, Isolation, Durability
<!-- more -->



## 트랜잭션이란? 

![트렌잭션](https://velog.velcdn.com/images/heyksw/post/06affeb2-a615-453e-9003-9623254d82ab/image.png)

- 데이터베이스에서 송금과 입금 처럼 뗄래야 뗄 수 없는 작업의 흐름 단위.

- 데이터베이스 무결성을 유지하고, 데이터를 복구하는 단위가 된다.

- 데이터베이스의 회복과 병행제어를 가능하게 한다.

- 데이터베이스 관리 시스템은 데이터베이스가 항상 정확하고 일관된 상태를 유지할 수 있도록 다양한 기능을 제공하는데, 그 중심에 트랜잭션이 있다.

---

> 트랜잭션은 ACID 조건을 만족해야한다.

### 1. Atomic (원자성)
트랜잭션은 원자처럼 쪼개지지 않아야한다. 전부 실행되거나, 전부 실행되지 않거나.

### 2. Consistency (일관성)
트랜잭션은 항상 일관된 결과를 낳아야한다.

### 3. Isoliation (고립성)
트랜잭션끼리는 서로 독립적으로 수행되어야 한다. 영향을 줘서는 안된다.

### 4. Durability (지속성)
트랜잭션으로 낳은 결과는 건드리지 않는 이상 계속 그 결과를 유지해야한다.

### ⭐️ DBMS에서는 트랜잭션 동시성제어를 제공한다.  

수많은 트랜잭션들이 동시적으로 수행될 때 어떤 트랜잭션 작업이 무효화 되지 않도록 한다.  
예) 수정중에 있는 transaction에 lock 을 걸어두고 다른 transaction 이 접근하지 못하게 한다.

---

## 트랜잭션 격리수준
![트랜잭션 격리수준](https://velog.velcdn.com/images/heyksw/post/8cb22236-dd11-4f5e-b738-da7e6de64f3b/image.png)

트랜잭션에서 동시성과 일관성은 반비례 관계에 있다.
동시에 실행할 수 있는 트랜잭션이 많아질수록, 트랜잭션 결과의 일관성은 떨어진다.

🚀 트랜잭션 격리수준 = 동시에 여러 트랜잭션이 처리될 때, 트랜잭션이 얼마나 서로 고립되어있는지의 정도를 나타내는 수준

각 트랜잭션은 Lock을 통해 다른 트랜잭션의 접근을 막는다. 하지만 무조건 Lock하면 동시성 측면에서 효율적이지 못하기 때문에 적절한 격리 수준으로 성능을 향상시킬 수 있다.

---

## Commit, Rollback

![Commit, Rollback](https://velog.velcdn.com/images/heyksw/post/4914edf5-5b0f-4b5e-98ed-fb2aca184668/image.png)

트랜잭션은 5가지의 상태를 가진다.

트랜잭션은 commit, rollback을 이용해서 데이터베이스 무결성을 보장한다.

Commit = 트랜잭션이 성공적으로 수행되어 일을 완료했음을 의미하고, 이 변경하상을 데이터베이스에 영구적으로 반영하는 것
Rollback = 트랜잭션 실행 중 오류가 발생하거나 다른 이유로 중단될 때, 데이터베이스를 트랜잭션 시작 전 상태로 되돌리는 것.
<br>

### 📌 정리
- 여러 트랜잭션이 동시에 실행될 때 데이터 무결성과 일관성을 보장하기 위해 트랜잭션 동시성 제어 메커니즘 사용.
- 트랜잭션 격리 수준은 동시성과 데이터 일관성 사이에서 반비례 관계로 균형을 유지함.
- 커밋은 트랜잭션의 성공적 완료를 확정하고, 롤백은 오류 발생 시 이전 상태로 되돌려 데이터 무결성을 유지함.
<br>
<br>
<br>
<br>