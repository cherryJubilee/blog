
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../9.%20actiontag_el_jstl/">
      
      
        <link rel="next" href="../../31/10.%20MVC%ED%8C%A8%ED%84%B4/">
      
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.9">
    
    
      
        <title>Docker 기본 - hyehye_hye's blog</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.78cf6014.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nanum+Gothic:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Nanum Gothic";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#docker" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://cherryjubilee.github.io/blog" title="hyehye_hye&#39;s blog" class="md-header__button md-logo" aria-label="hyehye_hye's blog" data-md-component="logo">
      
  <img src="../../../../../cherry.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            hyehye_hye's blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Docker 기본
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://cherryjubilee.github.io/blog" title="hyehye_hye&#39;s blog" class="md-nav__button md-logo" aria-label="hyehye_hye's blog" data-md-component="logo">
      
  <img src="../../../../../cherry.svg" alt="logo">

    </a>
    hyehye_hye's blog
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    배움에 욕심이 많은 주니어 개발자 박혜원입니다.
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Blog
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      <a href="../../../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Archive
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2024/07/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024 July
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2024/06/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024 June
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2024/05/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024 May
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2024/02/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024 February
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2024/01/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2024 January
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Categories
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/backend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/devops/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    devops
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/algorithm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    algorithm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/java/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    java
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/db/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    db
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/front/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    front
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/javascript/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Javascript
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/spring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    spring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/cloud/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cloud
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/quiz/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    quiz
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/os/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/study/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    study
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/react/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    react
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/web/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../../category/http/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTP
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#docker-cli" class="md-nav__link">
    <span class="md-ellipsis">
      ✅ Docker CLI 익히기
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      ✅ 컨테이너에서 발생하는 로그 확인
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      ✅ 실행중인 컨테이너 내부 환경에 접속하는 방법
    </span>
  </a>
  
    <nav class="md-nav" aria-label="✅ 실행중인 컨테이너 내부 환경에 접속하는 방법">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#redis" class="md-nav__link">
    <span class="md-ellipsis">
      예제 redis 실행해보기
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-volume" class="md-nav__link">
    <span class="md-ellipsis">
      ✅ Docker Volume(도커 볼륨)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="✅ Docker Volume(도커 볼륨)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docker-mysql-1" class="md-nav__link">
    <span class="md-ellipsis">
      🍀 [실습] Docker로 MySQL 실행시켜보기 - 1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mysql" class="md-nav__link">
    <span class="md-ellipsis">
      💡 볼륨 사용하여 mysql 띄우기
    </span>
  </a>
  
    <nav class="md-nav" aria-label="💡 볼륨 사용하여 mysql 띄우기">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      🤔 비밀번호를 바꿔서 컨테이너를 생성하면 어떻게 될까?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      🤔 볼룸의 경로를 잘못 작성한다면?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dockerfile" class="md-nav__link">
    <span class="md-ellipsis">
      ✅ Dockerfile
    </span>
  </a>
  
    <nav class="md-nav" aria-label="✅ Dockerfile">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-from" class="md-nav__link">
    <span class="md-ellipsis">
      1. FROM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-copy" class="md-nav__link">
    <span class="md-ellipsis">
      2. COPY
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-entrypoint" class="md-nav__link">
    <span class="md-ellipsis">
      3. ENTRYPOINT
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spring-boot-docker" class="md-nav__link">
    <span class="md-ellipsis">
      🍀 [실습] 백엔드 프로젝트(Spring Boot) 프로젝트를 Docker로 실행시키기
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-run" class="md-nav__link">
    <span class="md-ellipsis">
      4. RUN
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-workdir" class="md-nav__link">
    <span class="md-ellipsis">
      5. WORKDIR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-expose" class="md-nav__link">
    <span class="md-ellipsis">
      6. EXPOSE
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nestjs" class="md-nav__link">
    <span class="md-ellipsis">
      🍀 NestJS 프로젝트를 도커로 실행하기
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#html-css-nginx-docker" class="md-nav__link">
    <span class="md-ellipsis">
      ⭐️ # [실습] 웹 프론트엔드 프로젝트(HTML, CSS, Nginx)를 Docker로 배포하기
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-compose" class="md-nav__link">
    <span class="md-ellipsis">
      ✅ Docker Compose
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aws-ec2" class="md-nav__link">
    <span class="md-ellipsis">
      ✅ AWS EC2에 서버 배포하기
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aws-ec2-docker" class="md-nav__link">
    <span class="md-ellipsis">
      ✅ AWS EC2에 Docker를 활용해 배포하기
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content md-content--post" data-md-component="content">
    <div class="md-sidebar md-sidebar--post" data-md-component="sidebar" data-md-type="navigation">
      <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner md-post">
          <nav class="md-nav md-nav--primary">
            <div class="md-post__back">
              <div class="md-nav__title md-nav__container">
                <a href="../../../../" class="md-nav__link">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
                  <span class="md-ellipsis">
                    Back to index
                  </span>
                </a>
              </div>
            </div>
            
              <div class="md-post__authors md-typeset">
                
                  <div class="md-profile md-post__profile">
                    <span class="md-author md-author--long">
                      <img src="https://avatars.githubusercontent.com/u/112672507?v=4" alt="Hyewon Park">
                    </span>
                    <span class="md-profile__description">
                      <strong>Hyewon Park</strong><br>
                      Backend Developer
                    </span>
                  </div>
                
              </div>
            
            <ul class="md-post__meta md-nav__list">
              <li class="md-nav__item md-nav__item--section">
                <div class="md-post__title">
                  <span class="md-ellipsis">
                    Metadata
                  </span>
                </div>
                <nav class="md-nav">
                  <ul class="md-nav__list">
                    <li class="md-nav__item">
                      <div class="md-nav__link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5v-5Z"/></svg>
                        <time datetime="2024-07-30 00:00:00" class="md-ellipsis">Jul 30, 2024</time>
                      </div>
                    </li>
                    
                    
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 3v15h3V3H9m3 2 4 13 3-1-4-13-3 1M5 5v13h3V5H5M3 19v2h18v-2H3Z"/></svg>
                          <span class="md-ellipsis">
                            in
                            
                              <a href="../../../../category/devops/">devops</a></span>
                        </div>
                      </li>
                    
                    
                      
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10 10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67-.75 1.23L11 13V7h1.5Z"/></svg>
                          <span class="md-ellipsis">
                            
                              14 min read
                            
                          </span>
                        </div>
                      </li>
                    
                  </ul>
                </nav>
              </li>
            </ul>
          </nav>
          
        </div>
      </div>
    </div>
    <article class="md-content__inner md-typeset">
      
        


<h1 id="docker">Docker 기본</h1>
<blockquote>
<p>비전공자도 이해할 수 있는 Docker 입문/실전</p>
</blockquote>
<!-- more -->

<h2 id="docker-cli">✅ Docker CLI 익히기</h2>
<p>중단된 컨테이너 한번에 삭제</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>docker<span class="w"> </span>rm<span class="w">  </span><span class="si">${</span><span class="nv">docker</span><span class="p"> ps -qa</span><span class="si">}</span>
</code></pre></div>
<p>실행되고 있는 컨테이너 중단 + 제거 한번에 하기
도커 컨테이너는 실행되고 있는 상태에서는 지울 수 없다. (꼭 중단 시키고 제거해야됨)</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>docker<span class="w"> </span>rm<span class="w"> </span>-f<span class="w">  </span>도커컨테이너명
</code></pre></div>
<p>docker run</p>
<ol>
<li>도커 이미지 다운로드(pull) 받아서 컨테이너 생성(create)</li>
<li>create만 해도 이미지가 없다면 알아서 docker hub로 부터 이미지를 pull받은 후 컨테이너를 생성한다.</li>
<li>컨테이너 실행(start)</li>
</ol>
<p>포그라운드
백그라운드</p>
<h2 id="_1">✅ 컨테이너에서 발생하는 로그 확인</h2>
<p>로그 확인</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>docker<span class="w"> </span>logs<span class="w"> </span>69d
</code></pre></div>
<p>로그 마지막 10줄 확인</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>docker<span class="w"> </span>logs<span class="w"> </span>--tail<span class="w"> </span><span class="m">10</span><span class="w"> </span>69d
</code></pre></div>
<p>실시간으로 생성되는 로그 확인</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>docker<span class="w"> </span>logs<span class="w"> </span>--tail<span class="w"> </span><span class="m">0</span><span class="w"> </span>-f<span class="w"> </span>컨테이너아이디
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>
</code></pre></div>
<h2 id="_2">✅ 실행중인 컨테이너 내부 환경에 접속하는 방법</h2>
<p><img alt="alt text" src="../../../../devops/img/image3.png" /></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>컨테이너아이디<span class="w"> </span>bash
</code></pre></div>
<p>다시 내 PC 환경(host os)으로 나오기
<img alt="alt text" src="../../../../devops/img/image4.png" /></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nb">exit</span>
</code></pre></div>
<h3 id="redis">예제 redis 실행해보기</h3>
<p><img alt="alt text" src="../../../../devops/img/image5.png" /></p>
<ol>
<li>
<p>docker hub에서 redis 이미지 검색해보기</p>
<p><a href="https://hub.docker.com/search?q=redis">https://hub.docker.com/search?q=redis</a></p>
</li>
<li>
<p>도커 이미지 다운 + 컨테이너 생성 + 컨테이너 실행</p>
<ul>
<li>이미지 확인</li>
<li>컨테이너 확인</li>
<li>로그 확인</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>-p<span class="w"> </span><span class="m">6379</span>:6379<span class="w"> </span>redis
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>docker<span class="w"> </span>image<span class="w"> </span>ls
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>docker<span class="w"> </span>ps
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>docker<span class="w"> </span>logs<span class="w"> </span>4f3
</code></pre></div>
</li>
<li>
<p>레디스 컨테이너 접근</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>4f3<span class="w"> </span>bash
</code></pre></div>
</li>
<li>
<p>레디스에 직접 접근</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>root@4f3f8cc95a6f:/#<span class="w"> </span>redis-cli
</code></pre></div>
</li>
<li>
<p>이미지 삭제, 컨테이너 삭제</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>docker<span class="w"> </span>rm<span class="w"> </span>-f<span class="w"> </span>4f3
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>docker<span class="w"> </span>ps
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>docker<span class="w"> </span>image<span class="w"> </span>ls
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>docker<span class="w"> </span>image<span class="w"> </span>rm<span class="w"> </span>redis
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>docker<span class="w"> </span>rm<span class="w"> </span>-f<span class="w"> </span>8d3
</code></pre></div>
</li>
</ol>
<h2 id="docker-volume">✅ Docker Volume(도커 볼륨)</h2>
<ul>
<li>도커 이미지를 변경하고싶을 때 이미지를 수정하는 것 보다 새로 만드는 것이 효율적이라고 생각했다</li>
<li>하지만 기존 컨테이너 내부에 있던 데이터가 같이 삭제된다. 이렇게 컨테이너 내부에 저장된 데이터가 삭제되면 안되는 경우에 Volume 라는 개념을 활용하게 된다.</li>
<li>새로 만들어지는 컨테이너의 자체 저장공간을 사용하지 않고, 호스트 자체 저장공간을 공유해서 사용하는 방식이다.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-v<span class="w"> </span><span class="o">[</span>호스트의<span class="w"> </span>디렉토리<span class="w"> </span>절대경로<span class="o">]</span>:<span class="o">[</span>컨테이너의<span class="w"> </span>디렉토리<span class="w"> </span>절대경로<span class="o">]</span><span class="w"> </span><span class="o">[</span>이미지명<span class="o">]</span>:<span class="o">[</span>태그명<span class="o">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>
</code></pre></div>
<h3 id="docker-mysql-1">🍀 [실습] Docker로 MySQL 실행시켜보기 - 1</h3>
<ol>
<li>
<p>MySQL 이미지를 바탕으로 컨테이너 실행시키기</p>
<p><a href="https://hub.docker.com/_/mysql">https://hub.docker.com/_/mysql</a></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-e<span class="w"> </span><span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span>password123<span class="w"> </span>-p<span class="w"> </span><span class="m">3306</span>:3306<span class="w"> </span>-d<span class="w"> </span>mysql
</code></pre></div>
</li>
<li>
<p>mysql 포트가 이미 사용중이라는 에러가 뜬다.
   <img alt="alt text" src="../../../../devops/img/image8.png" />
   <img alt="alt text" src="../../../../devops/img/image6.png" /></p>
</li>
<li>
<p>해당 포트가 어디에 사용되고 있는지 확인하고 kill</p>
<ul>
<li>docker run 잘 됨!</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>sudo<span class="w"> </span>lsof<span class="w"> </span>-i:3306
</code></pre></div>
<p><img alt="alt text" src="../../../../devops/img/image9.png" />
<img alt="alt text" src="../../../../devops/img/image7.png" /></p>
</li>
<li>
<p>docker ps 했는데, 컨테이너가 없음</p>
<ul>
<li>에러가 발생했다는 것을 유추할 수 있다.</li>
<li>우선 로그를 확인한다.<br />
  ✔️ 에러내용 : 패스워드 옵션이 정의되지 않아서 db가 시작을 못했다</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>docker<span class="w"> </span>ps
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>docker<span class="w"> </span>ps<span class="w"> </span>-a
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>docker<span class="w"> </span>logs<span class="w"> </span>4df
</code></pre></div>
<p><img alt="alt text" src="../../../../devops/img/image10.png" /></p>
</li>
<li>
<p><code>-e</code> : 환경변수 설정</p>
<ul>
<li><code>e MYSQL_ROOT_PASSWORD=password123</code> : -e 옵션은 컨테이너의 환경 변수를 설정하는 옵션이다.</li>
<li>Dockerhub의 MySQL 공식 문서를 보면 환경 변수로 MYSQL_ROOT_PASSWORD를 정해주어야만 정상적으로 컨테이너가 실행된다고 적혀져있다.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-e<span class="w">  </span><span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span>pass123#<span class="w"> </span>-d<span class="w"> </span>-p<span class="w"> </span><span class="m">3306</span>:3306<span class="w"> </span>mysql
</code></pre></div>
<ul>
<li>환경변수가 컨테이너 내에서 잘 설정 되어있는지 확인하기.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="o">[</span>MySQL<span class="w"> </span>컨테이너<span class="w"> </span>ID<span class="o">]</span><span class="w"> </span>bash
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="nb">echo</span><span class="w"> </span><span class="nv">$MYSQL_ROOT_PASSWORD</span><span class="w">   </span><span class="c1"># MYSQL_ROOT_PASSWORD라는 환경변수 값 출력</span>
</code></pre></div>
<p><img alt="alt text" src="../../../../devops/img/image11.png" /></p>
</li>
</ol>
<p>워크벤치, 디비버 등으로 확인할 수 있다.</p>
<hr>

<p>💡 볼륨을 사용하지 않으면 컨테이너 삭제 후 다시 띄웠을 때 데이터가 사라진다.</p>
<ol>
<li>
<p>mysql에 접속해서 hyewondb 데이터베이스 생성하기</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-e<span class="w">  </span><span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span>pass123#<span class="w"> </span>-d<span class="w"> </span>-p<span class="w"> </span><span class="m">3306</span>:3306<span class="w"> </span>mysql
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>09e<span class="w"> </span>bash
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>mysql<span class="w"> </span>-u<span class="w"> </span>root<span class="w"> </span>-p
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>패스워드<span class="w"> </span>입력<span class="w"> </span>:<span class="w"> </span>pass123#
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>create<span class="w"> </span>database<span class="w"> </span>hyewondb<span class="p">;</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>docker<span class="w"> </span>rm<span class="w"> </span>-f<span class="w"> </span>09e<span class="w">  </span><span class="c1"># 09e컨테이너 삭제</span>
</code></pre></div>
<p><img alt="alt text" src="../../../../devops/img/image12.png" /></p>
</li>
<li>
<p>mysql 컨테이너 다시 생성 -&gt; hyewondb 사라져 있음</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-e<span class="w">  </span><span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span>pass123#<span class="w"> </span>-d<span class="w"> </span>-p<span class="w"> </span><span class="m">3306</span>:3306<span class="w"> </span>mysql
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>9de<span class="w"> </span>bash<span class="w">  </span><span class="c1"># 새로운 9de 컨테이너 생성됨</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>mysql<span class="w"> </span>-u<span class="w"> </span>root<span class="w"> </span>-p
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>패스워드<span class="w"> </span>입력<span class="w"> </span>:<span class="w"> </span>pass123#
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>show<span class="w"> </span>databases<span class="p">;</span>
</code></pre></div>
<p><img alt="alt text" src="../../../../devops/img/image13.png" /></p>
</li>
</ol>
<p>📌 위 방식은 볼륨(Volume)을 활용하지 않고 MySQL 컨테이너를 띄웠다. 그래서 MySQL 컨테이너를 삭제함과 동시에 MySQL 내부에 저장되어 있던 데이터도 함께 삭제되어 없어졌다. 이를 방지하기 위해 볼륨(Volume)을 활용해 MySQL 컨테이너를 띄우는 방식에 대해 알아볼 것이다.</p>
<h3 id="mysql">💡 볼륨 사용하여 mysql 띄우기</h3>
<ol>
<li>
<p>MySQL 컨테이너 띄우기</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="nb">cd</span><span class="w"> </span>/Users/hyewon/Documents/Develop
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>mkdir<span class="w"> </span>docker-mysql<span class="w"> </span><span class="c1"># MySQL 데이터를 저장하고 싶은 폴더 만들기</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="c1"># docker run -e MYSQL_ROOT_PASSWORD=password123 -p 3306:3306 -v {호스트의 절대경로}/mysql_data:/var/lib/mysql -d mysql</span>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>docker<span class="w"> </span>run<span class="w"> </span>-e<span class="w"> </span><span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span>pass123#<span class="w"> </span>-d<span class="w"> </span>-p<span class="w"> </span><span class="m">3306</span>:3306<span class="w"> </span>-v<span class="w"> </span>/Users/hyewon/Documents/Develop/docker-mysql/mysql_data:/var/lib/mysql<span class="w"> </span>mysql
</code></pre></div>
<ul>
<li>DB에 관련된 데이터가 저장되는 곳이 /var/lib/mysql인지는 Dockerhub MySQL의 공식 문서에 나와있다.</li>
</ul>
<p><img alt="alt text" src="../../../../devops/image-2.png" /></p>
</li>
<li>
<p>MySQL 컨테이너에 접속해서 데이터베이스 만들기</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>$<span class="w"> </span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="o">[</span>MySQL<span class="w"> </span>컨테이너<span class="w"> </span>ID<span class="o">]</span><span class="w"> </span>bash
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>$<span class="w"> </span>mysql<span class="w"> </span>-u<span class="w"> </span>root<span class="w"> </span>-p
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>mysql&gt;<span class="w"> </span>show<span class="w"> </span>databases<span class="p">;</span>
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>mysql&gt;<span class="w"> </span>create<span class="w"> </span>database<span class="w"> </span>hyewondb<span class="p">;</span>
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>mysql&gt;<span class="w"> </span>show<span class="w"> </span>databases<span class="p">;</span>
</code></pre></div>
</li>
<li>
<p>컨테이너 종료 후 다시 생성해보기</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="c1"># 컨테이너 종료</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>$<span class="w"> </span>docker<span class="w"> </span>stop<span class="w"> </span><span class="o">[</span>MySQL<span class="w"> </span>컨테이너<span class="w"> </span>ID<span class="o">]</span>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>$<span class="w"> </span>docker<span class="w"> </span>rm<span class="w"> </span><span class="o">[</span>MySQL<span class="w"> </span>컨테이너<span class="w"> </span>ID<span class="o">]</span>
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="c1"># 컨테이너 생성</span>
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-e<span class="w"> </span><span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span>pass123!<span class="w"> </span>-p<span class="w"> </span><span class="m">3306</span>:3306<span class="w"> </span>-v<span class="w"> </span>/Users/hyewon/Documents/Develop/docker-mysql/mysql_data:/var/lib/mysql<span class="w"> </span>-d<span class="w"> </span>mysql
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>$<span class="w"> </span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="o">[</span>MySQL<span class="w"> </span>컨테이너<span class="w"> </span>ID<span class="o">]</span><span class="w"> </span>bash
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>$<span class="w"> </span>mysql<span class="w"> </span>-u<span class="w"> </span>root<span class="w"> </span>-p
<a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a>mysql&gt;<span class="w"> </span>show<span class="w"> </span>databases<span class="p">;</span>
</code></pre></div>
<ul>
<li>
<p>아까 생성한 데이터베이스가 새로 생성한 컨테이너에서도 존재한다.</p>
<p><img alt="alt text" src="../../../../devops/image.png" /></p>
</li>
</ul>
</li>
</ol>
<hr>

<h4 id="_3">🤔 비밀번호를 바꿔서 컨테이너를 생성하면 어떻게 될까?</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="c1"># 컨테이너 종료</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>$<span class="w"> </span>docker<span class="w"> </span>stop<span class="w"> </span><span class="o">[</span>MySQL<span class="w"> </span>컨테이너<span class="w"> </span>ID<span class="o">]</span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>$<span class="w"> </span>docker<span class="w"> </span>rm<span class="w"> </span><span class="o">[</span>MySQL<span class="w"> </span>컨테이너<span class="w"> </span>ID<span class="o">]</span>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="c1"># 컨테이너 생성</span>
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a>$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-e<span class="w"> </span><span class="nv">MYSQL_ROOT_PASSWORD</span><span class="o">=</span>change123!<span class="w"> </span>-p<span class="w"> </span><span class="m">3306</span>:3306<span class="w"> </span>-v<span class="w"> </span>/Users/hyewon/Documents/Develop/docker-mysql/mysql_data:/var/lib/mysql<span class="w"> </span>-d<span class="w"> </span>mysql
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a>
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a>$<span class="w"> </span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="o">[</span>MySQL<span class="w"> </span>컨테이너<span class="w"> </span>ID<span class="o">]</span><span class="w"> </span>bash
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="c1"># 접속 안됨 🚨</span>
</code></pre></div>
<ul>
<li>접속이 안되는 이유?<ul>
<li>처음 환경변수 설정 시 Volume으로 설정해둔 폴더에 이미 비밀번호 정보가 저장되버렸기 때문이다.</li>
<li>아예 mysql_data를 지우고 다시 mysql을 띄우면 된다.<ul>
<li>rm -rf -mysql_data</li>
</ul>
</li>
<li>볼륨의 특성이다.</li>
</ul>
</li>
</ul>
<hr>

<h4 id="_4">🤔 볼룸의 경로를 잘못 작성한다면?</h4>
<p>🚨 주의) mysql_data 디렉토리를 미리 만들어 놓으면 안 된다. 그래야 처음 이미지를 실행시킬 때 mysql 내부에 있는 /var/lib/mysql 파일들을 호스트 컴퓨터로 공유받을 수 있다. mysql_data 디렉토리를 미리 만들어놓을 경우, 기존 컨테이너의 /var/lib/mysql 파일들을 전부 삭제한 뒤에 mysql_data로 덮어씌워 버린다.</p>
<ol>
<li>
<p>mysql_data 파일을 생성하고, aaa.txt 작성
   <img alt="alt text" src="../../../../devops/image-6.png" /></p>
<ul>
<li>docker ps 결과 컨테이너가 생성이 안됨</li>
<li>에러 발생 : [Server] --initialize specified but the data directory has files in it. Aborting.</li>
<li>✔️ [호스트의 디렉토리 절대 경로]에 디렉토리가 이미 존재할 경우, 호스트의 디렉터리가 컨테이너의 디렉터리를 덮어씌운다.</li>
</ul>
<p><img alt="alt text" src="../../../../devops/image-5.png" /></p>
</li>
<li>
<p>mysql_data 파일 지우고, 컨테이너 다시 생성</p>
<ul>
<li>컨테이너 생성완료</li>
<li>✔️ [호스트의 디렉토리 절대 경로]에 디렉토리가 존재하지 않을 경우, 호스트의 디렉터리 절대 경로에 디렉터리를 새로 만들고 컨테이너의 디렉터리에 있는 파일들을 호스트의 디렉터리로 복사해온다.
  <img alt="alt text" src="../../../../devops/image-7.png" /></li>
</ul>
</li>
<li>
<p>컨테이너 내에서의 파일과, 볼륨의 파일이 완전하게 일치한다.</p>
<ul>
<li>즉 호스트에서 파일을 추가하면 컨테이너에서도 추가된 파일을 볼 수있다.
  <img alt="alt text" src="../../../../devops/image-3.png" /></li>
</ul>
</li>
</ol>
<p><br></p>
<h2 id="dockerfile">✅ Dockerfile</h2>
<ul>
<li>우리가 도커 이미지를 다운 받을 수 있는 이유는, 누군가가 dockerfile로 docker image를 만들어 docker hub에 올린 것이다.</li>
<li>우선 Dockerfile 문법에 대해서 알아보자</li>
</ul>
<h3 id="1-from">1. FROM</h3>
<ul>
<li>베이스 이미지 생성</li>
<li>특정 초기 이미지</li>
<li><code>-t</code> : tag</li>
<li>상대경로로 작성하니까 해당 위치로 들어와있어야 함</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="k">FROM</span><span class="w"> </span><span class="s">openjdk:17-jdk</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="k">ENTRYPOINT</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;/bin/bash&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-c&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;sleep 500&quot;</span><span class="w"> </span><span class="p">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>my-jdk17-server<span class="w"> </span>.
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>my-jdk17-server:beta<span class="w"> </span>.
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>docker<span class="w"> </span>image<span class="w"> </span>ls
</code></pre></div>
<p><img alt="alt text" src="../../../../devops/image-8.png" /></p>
<p>실행 되었다가 종료 되었다고 뜸. 이유는 도커 파일에 작성된 작업이 모두 끝나면 컨테이너가 저절로 종료가 된다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>my-jdk17-server<span class="w"> </span>.
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span><span class="o">[</span>원하는<span class="w"> </span>도커<span class="w"> </span>이미지<span class="w"> </span>이름<span class="o">]</span><span class="w"> </span><span class="o">[</span>도커파일<span class="w"> </span>경로<span class="o">]</span>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>my-jdk17-server
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>c98<span class="w"> </span>bash<span class="w"> </span><span class="c1"># 실행중인 컨테이너이기 때문에 가능</span>
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>bash-4.4#<span class="w"> </span>java<span class="w"> </span>-version<span class="w"> </span><span class="c1"># jdk 깔려있는지 버전 확인</span>
</code></pre></div>
<p><img alt="alt text" src="../../../../devops/image-10.png" /></p>
<p>😎 👀 종료된 컨테이너에서 디버깅하고 싶다면?</p>
<p>지금까지는 아래 2가지 방법을 사용했다.</p>
<div class="highlight"><pre><span></span><code>1.   docker logs
2.   docker exec -it [컨테이너 ID] bash
3.   실행중인 컨테이너로 만들기 위해 dockerfile에 `ENTRYPOINT [ &quot;/bin/bash&quot;, &quot;-c&quot;, &quot;sleep 500&quot; ]` 추가.(디버깅 하기 위함)

```bash
FROM openjdk:17-jdk

ENTRYPOINT [&quot;/bin/bash&quot;, &quot;-c&quot;, &quot;sleep 500&quot;] # 500초 동안 시스템을 일시정지 시키는 명령어
```
</code></pre></div>
<h3 id="2-copy">2. COPY</h3>
<ul>
<li>파일 복사(이동)</li>
<li>호스트 컴퓨터에있는 파일을 복사해서 컨테이너로 전달<ul>
<li>호스트 -&gt; 컨테이너</li>
</ul>
</li>
<li>
<p>문법</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>COPY<span class="w"> </span><span class="o">[</span>호스트<span class="w"> </span>컴퓨터에<span class="w"> </span>있는<span class="w"> </span>복사할<span class="w"> </span>파일의<span class="w"> </span>경로<span class="o">]</span><span class="w"> </span><span class="o">[</span>컨테이너에서<span class="w"> </span>파일이<span class="w"> </span>위치할<span class="w"> </span>경로<span class="o">]</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>COPY<span class="w"> </span>app.txt<span class="w"> </span>/app.txt
</code></pre></div>
</li>
</ul>
<blockquote>
<p>1️⃣ 파일 복사해보기</p>
</blockquote>
<ul>
<li>app.txt 파일 만들기</li>
<li>
<p>Dockerfile 만들어서 이미지 생성 및 컨테이너 실행</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="k">FROM</span><span class="w"> </span><span class="s">ubuntu</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="k">COPY</span><span class="w"> </span>app.txt<span class="w"> </span>/app.txt
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="k">ENTRYPOINT</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;/bin/bash&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-c&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;sleep 500&quot;</span><span class="w"> </span><span class="p">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>my-server<span class="w"> </span>.
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>my-server
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>a9a<span class="w"> </span>bash
</code></pre></div>
<p><img alt="alt text" src="../../../../devops/image-12.png" /></p>
</li>
</ul>
<blockquote>
<p>2️⃣ 폴더 안에있는 모든 파일 복사하기</p>
</blockquote>
<ul>
<li>my-app 디렉터리 만들기, my-app 디렉터리 안에 파일 만들기</li>
<li>
<p>Dockerfile 만들어서 이미지 생성 및 컨테이너 실행</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="k">FROM</span><span class="w"> </span><span class="s">ubuntu</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="k">COPY</span><span class="w"> </span>my-app<span class="w"> </span>/my-app/
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="k">ENTRYPOINT</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;/bin/bash&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-c&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;sleep 500&quot;</span><span class="w"> </span><span class="p">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>my-server<span class="w"> </span>.
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>my-server
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="m">539</span><span class="w"> </span>bash
</code></pre></div>
<p><img alt="alt text" src="../../../../devops/image-13.png" /></p>
</li>
</ul>
<blockquote>
<p>3️⃣ 와일드 카드 사용해보기</p>
</blockquote>
<ul>
<li>
<p><code>app.txt</code>, <code>readme.txt</code> 파일 2개 만들기</p>
</li>
<li>
<p>Dockerfile 만들어서 이미지 생성 및 컨테이너 실행</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="k">FROM</span><span class="w"> </span><span class="s">ubuntu</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="k">COPY</span><span class="w"> </span>*.txt<span class="w"> </span>/text-files/
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a>
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="k">ENTRYPOINT</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;/bin/bash&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-c&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;sleep 500&quot;</span><span class="w"> </span><span class="p">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>my-server<span class="w"> </span>.
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>my-server
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="m">280</span><span class="w"> </span>bash
</code></pre></div>
<p><img alt="alt text" src="../../../../devops/image-14.png" /></p>
</li>
</ul>
<blockquote>
<p>4️⃣ .dockerignore 사용해보기</p>
</blockquote>
<ul>
<li>특정 파일 또는 폴더만 COPY를 하고 싶지 않을 수 있다. 그럴 때 .dockerignore를 활용한다.</li>
<li>.dockerignore 파일 만들기</li>
<li>
<p>Dockerfile 만들어서 이미지 생성 및 컨테이너 실행</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="k">FROM</span><span class="w"> </span><span class="s">ubuntu</span>
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a>
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="k">COPY</span><span class="w"> </span>./<span class="w"> </span>/
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a>
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="k">ENTRYPOINT</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;/bin/bash&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-c&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;sleep 500&quot;</span><span class="w"> </span><span class="p">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>my-server<span class="w"> </span>.
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>my-server
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>3ec<span class="w"> </span>bash
</code></pre></div>
<p><img alt="alt text" src="../../../../devops/image-15.png" /></p>
</li>
</ul>
<h3 id="3-entrypoint">3. ENTRYPOINT</h3>
<ul>
<li>컨테이너가 시작할 때 실행되는 명령어를 ENTRYPOINT에 작성한다.</li>
<li>
<p>사용법</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="c1"># 문법</span>
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a>ENTRYPOINT<span class="w"> </span><span class="o">[</span>명령문...<span class="o">]</span>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a>
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="c1"># 예시</span>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a>ENTRYPOINT<span class="w"> </span><span class="o">[</span><span class="s2">&quot;node&quot;</span>,<span class="w"> </span><span class="s2">&quot;dist/main.js&quot;</span><span class="o">]</span>
</code></pre></div>
</li>
<li>
<p>예제</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="k">FROM</span><span class="w"> </span><span class="s">ubuntu</span>
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="k">ENTRYPOINT</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;/bin/bash&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-c&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;echo hello&quot;</span><span class="w"> </span><span class="p">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>my-server<span class="w"> </span>.
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>docker<span class="w"> </span>logs<span class="w"> </span>52e
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a>hello
</code></pre></div>
<p><img alt="alt text" src="../../../../devops/image-16.png" /></p>
</li>
</ul>
<h3 id="spring-boot-docker">🍀 [실습] 백엔드 프로젝트(Spring Boot) 프로젝트를 Docker로 실행시키기</h3>
<ol>
<li>spring 프로젝트 셋팅
   <img alt="alt text" src="../../../../devops/image-17.png" /></li>
<li>
<p>간단한 코드 작성</p>
<ul>
<li>AppController</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="w"> </span><span class="nd">@RestController</span>
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="w"> </span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AppController</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="w"> </span><span class="nd">@GetMapping</span><span class="p">(</span><span class="s">&quot;/&quot;</span><span class="p">)</span>
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a><span class="w"> </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">home</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a><span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Hello, World!&quot;</span><span class="p">;</span>
<a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a><span class="w"> </span><span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>Dockerfile 작성하기</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="k">FROM</span><span class="w"> </span><span class="s">openjdk:17-jdk</span>
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a><span class="k">COPY</span><span class="w"> </span>build/libs/*SNAPSHOT.jar<span class="w"> </span>/app.jar
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a>
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a><span class="k">ENTRYPOINT</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;java&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-jar&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;/app.jar&quot;</span><span class="p">]</span>
</code></pre></div>
</li>
<li>
<p>Spring Boot 프로젝트 빌드하기</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>./gradleew<span class="w"> </span>clean<span class="w"> </span>build
</code></pre></div>
</li>
<li>
<p>Dockerfile을 바탕으로 이미지 빌드하기</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="w"> </span>$<span class="w"> </span>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>hello-server<span class="w"> </span>.
</code></pre></div>
</li>
<li>
<p>이미지가 잘 생성됐는 지 확인하기</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>$<span class="w"> </span>docker<span class="w"> </span>image<span class="w"> </span>ls
</code></pre></div>
</li>
<li>
<p>생성한 이미지를 컨테이너로 실행시켜보기</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>-p<span class="w"> </span><span class="m">8080</span>:8080<span class="w"> </span>hello-server
</code></pre></div>
</li>
<li>
<p>컨테이너 잘 실행되고 있는 지 확인하기</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>docker<span class="w"> </span>ps
</code></pre></div>
</li>
<li>
<p>localhost:8080으로 들어가보기</p>
</li>
<li>
<p>실행시킨 컨테이너 중지 / 삭제하기, 이미지 삭제하기</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>$<span class="w"> </span>docker<span class="w"> </span>stop<span class="w"> </span><span class="o">{</span>컨테이너<span class="w"> </span>ID<span class="o">}</span>
<a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a>$<span class="w"> </span>docker<span class="w"> </span>rm<span class="w"> </span><span class="o">{</span>컨테이너<span class="w"> </span>ID<span class="o">}</span>
<a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a>$<span class="w"> </span>docker<span class="w"> </span>image<span class="w"> </span>rm<span class="w"> </span><span class="o">{</span>이미지<span class="w"> </span>ID<span class="o">}</span>
</code></pre></div>
</li>
</ol>
<h3 id="4-run">4. RUN</h3>
<ul>
<li>이미지를 생성하는 과정에서 사용할 명령문 실행</li>
<li>⭐️ RUN은 ‘이미지 생성 과정’에서 필요한 명령어를 실행시킬 때 사용하고, ENTRYPOINT는 생성된 이미지를 기반으로 컨테이너를 생성한 직후에 명령어를 실행시킬 때 사용한다.</li>
<li>
<p>사용법</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="c1"># 문법</span>
<a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a>RUN<span class="w"> </span><span class="o">[</span>명령문<span class="o">]</span>
<a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a>
<a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a><span class="c1"># 예시</span>
<a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a>RUN<span class="w"> </span>npm<span class="w"> </span>install
</code></pre></div>
</li>
<li>
<p>예제 가정 : git, ubuntu가 함께 깔려있으면 좋겠다</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>FROM<span class="w"> </span>ubuntu
<a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a>
<a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a>RUN<span class="w"> </span>apt<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>git
<a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a>
<a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a>ENTRYPOINT<span class="w"> </span><span class="o">[</span><span class="s2">&quot;/bin/bash&quot;</span>,<span class="w"> </span><span class="s2">&quot;-c&quot;</span>,<span class="w"> </span><span class="s2">&quot;sleep 500&quot;</span><span class="o">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>$<span class="w"> </span>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>my-server<span class="w"> </span>.
<a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a>$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>my-server
<a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a>$<span class="w"> </span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="o">[</span>Container<span class="w"> </span>ID<span class="o">]</span><span class="w"> </span>bash
<a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a>
<a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a>$<span class="w"> </span>git<span class="w"> </span>-v<span class="w"> </span><span class="c1"># 컨테이너 내에 git이 잘 설치됐는 지 확인</span>
</code></pre></div>
<p><img alt="alt text" src="../../../../devops/image-18.png" /></p>
</li>
</ul>
<h3 id="5-workdir">5. WORKDIR</h3>
<ul>
<li>작업 디렉토리를 지정한다.</li>
<li>컨테이너 내부에 존재하던 기존파일들과 분리하여 폴더를 깔끔하기 관리하기 위함이다.</li>
<li>
<p>사용법</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="c1"># 문법</span>
<a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a>WORKDIR<span class="w"> </span><span class="o">[</span>작업<span class="w"> </span>디렉토리로<span class="w"> </span>사용할<span class="w"> </span>절대<span class="w"> </span>경로<span class="o">]</span>
<a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a>
<a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a><span class="c1"># 예시</span>
<a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a>WORKDIR<span class="w"> </span>/usr/src/app
</code></pre></div>
</li>
<li>
<p>예제 : WORKDIR을 안 썼을 때 파일 구성 보기</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>FROM<span class="w"> </span>ubuntu
<a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a>
<a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a>COPY<span class="w"> </span>./<span class="w"> </span>./
<a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a>
<a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a>ENTRYPOINT<span class="w"> </span><span class="o">[</span><span class="s2">&quot;/bin/bash&quot;</span>,<span class="w"> </span><span class="s2">&quot;-c&quot;</span>,<span class="w"> </span><span class="s2">&quot;sleep 500&quot;</span><span class="o">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a>$<span class="w"> </span>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>my-server<span class="w"> </span>.
<a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a>
<a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a>$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>my-server
<a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a>$<span class="w"> </span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="o">[</span>Container<span class="w"> </span>ID<span class="o">]</span><span class="w"> </span>bash
<a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a>
<a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a>$<span class="w"> </span>ls
</code></pre></div>
<p><img alt="alt text" src="../../../../devops/image-19.png" /></p>
</li>
<li>
<p>예제 : WORKDIR을 썼을 때 파일 구성 보기</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>FROM<span class="w"> </span>ubuntu
<a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a>
<a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a>WORKDIR<span class="w"> </span>/my-dir
<a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a>
<a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a>COPY<span class="w"> </span>./<span class="w"> </span>./
<a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a>
<a id="__codelineno-55-7" name="__codelineno-55-7" href="#__codelineno-55-7"></a>ENTRYPOINT<span class="w"> </span><span class="o">[</span><span class="s2">&quot;/bin/bash&quot;</span>,<span class="w"> </span><span class="s2">&quot;-c&quot;</span>,<span class="w"> </span><span class="s2">&quot;sleep 500&quot;</span><span class="o">]</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a>$<span class="w"> </span>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>my-server<span class="w"> </span>.
<a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a>
<a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a>$<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-d<span class="w"> </span>my-server
<a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a>$<span class="w"> </span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span><span class="o">[</span>Container<span class="w"> </span>ID<span class="o">]</span><span class="w"> </span>bash
<a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a>
<a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a>$<span class="w"> </span>ls
</code></pre></div>
<p><img alt="alt text" src="../../../../devops/image-20.png" /></p>
</li>
</ul>
<h3 id="6-expose">6. EXPOSE</h3>
<ul>
<li>컨테이너 내부에서 사용 중인 포트를 문서화하기</li>
<li>없어도 작동하기 떄문에 문서화 라고 한다.</li>
<li>
<p>사용법</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="c1"># 문법</span>
<a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a>EXPOSE<span class="w"> </span><span class="o">[</span>포트<span class="w"> </span>번호<span class="o">]</span>
<a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a>
<a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a><span class="c1"># 예시</span>
<a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a>EXPOSE<span class="w"> </span><span class="m">3000</span>
</code></pre></div>
</li>
</ul>
<p><br></p>
<h3 id="nestjs">🍀 NestJS 프로젝트를 도커로 실행하기</h3>
<p><img alt="alt text" src="../../../../devops/image-21.png" /></p>
<h3 id="html-css-nginx-docker">⭐️ # [실습] 웹 프론트엔드 프로젝트(HTML, CSS, Nginx)를 Docker로 배포하기</h3>
<h2 id="docker-compose">✅ Docker Compose</h2>
<p><br></p>
<h2 id="aws-ec2">✅ AWS EC2에 서버 배포하기</h2>
<p><br></p>
<h2 id="aws-ec2-docker">✅ AWS EC2에 Docker를 활용해 배포하기</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a>```
<a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a>
<a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a>```
</code></pre></div>



  



      
    </article>
  </div>

          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
        
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../9.%20actiontag_el_jstl/" class="md-footer__link md-footer__link--prev" aria-label="Previous: JSP action tag, el, jstl">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                JSP action tag, el, jstl
              </div>
            </div>
          </a>
        
        
          
          <a href="../../31/10.%20MVC%ED%8C%A8%ED%84%B4/" class="md-footer__link md-footer__link--next" aria-label="Next: MVC 패턴">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                MVC 패턴
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 Hyewon Park
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/cherryJubilee/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/cherryJubilee" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../../..", "features": ["content.code.copy", "navigation.expand", "navigation.top", "navigation.footer", "content.tabs.link"], "search": "../../../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.6c14ae12.min.js"></script>
      
    
  </body>
</html>